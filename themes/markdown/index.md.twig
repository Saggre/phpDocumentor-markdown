{% import 'include/macros.twig' as macros %}
{% block content %}
{% include 'partials/header.md.twig' with {
    title: project.name,
    description: project.description,
} only %}

This is an automatically generated documentation for **{{project.name}}**.
{# Gitlab supports automatic table of contents generation #}
{% if md_flavour == 'gitlab' %}
{{- '\n\n' -}}
# Table of contents
[[_TOC_]]

{% endif %}

## Namespaces
{% for namespace in project.indexes.namespaces | sort((a,b) => a.FullyQualifiedStructuralElementName <=> b.FullyQualifiedStructuralElementName) %}
{% if (namespace.classes | length) > 0 or (namespace.traits | length) > 0 or (namespace.interfaces | length) > 0 %}

### {{ namespace.FullyQualifiedStructuralElementName }}
{% if namespace.classes | length > 0 %}

#### Classes

{% set parameters = [] %}
{% for class in namespace.classes %}
{% set parameters = parameters | merge([
    {
        link: macros.mdClassLink(class.FullyQualifiedStructuralElementName),
        description: class.summary | nl2br | replace({"\n": "", "\r": "", "\t": ""}) | raw
    }
]) %}
{% endfor -%}
{{ macros.mdTable(parameters, [
    { label: 'Class', key: 'link' },
    { label: 'Description', key: 'description' },
]) }}
{%- endif %}
{% if namespace.traits | length > 0 %}

#### Traits

{% set parameters = [] %}
{% for trait in namespace.traits %}
{% set parameters = parameters | merge([
    {
        link: macros.mdClassLink(trait.FullyQualifiedStructuralElementName),
        description: trait.summary | nl2br | replace({"\n": "", "\r": "", "\t": ""}) | raw
    }
]) %}
{% endfor -%}
{{ macros.mdTable(parameters, [
    { label: 'Trait', key: 'link' },
    { label: 'Description', key: 'description' },
]) }}
{%- endif %}
{% if namespace.interfaces | length > 0 %}

#### Interfaces

{% set parameters = [] %}
{% for interface in namespace.interfaces %}
{% set parameters = parameters | merge([
    {
        link: macros.mdClassLink(interface.FullyQualifiedStructuralElementName),
        description: interface.summary | nl2br | replace({"\n": "", "\r": "", "\t": ""}) | raw
    }
]) %}
{% endfor -%}
{{ macros.mdTable(parameters, [
    { label: 'Interface', key: 'link' },
    { label: 'Description', key: 'description' },
]) }}
{%- endif %}
{% endif %}
{% endfor %}
{% if parameter.includeFooter == 'yes' %}{% include 'partials/footer.md.twig' %}{% endif %}{% endblock %}